<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#box{
				width: 200px;
				height: 200px;
				background: yellow;
				position: absolute;
			}
			.act{
				border: 1px solid black;
				position: absolute;
			}
			#btn{
				width: 100px;
				height: 30px;
				margin-bottom: 10px;
			}
		</style>
	</head>
	<body>
		<input type="button"  id="btn" value="恢复" />
		<div id="box"></div>
		<script>
			var box=document.getElementById('box');
			var box1=document.getElementById('box');
			var btn=document.getElementById('btn');
			var x=box.offsetLeft;
			var y=box.offsetTop;
			var str=[x,];
			var str1=[y,];
			box.onmousedown=function(ev){
				var oEvent=ev||event;
				var disx=oEvent.clientX-box.offsetLeft;
				var disy=oEvent.clientY-box.offsetTop;
				//生成边框div
				var act1=document.createElement('div');
				act1.style.width=box.offsetWidth-2+'px';
				act1.style.height=box.offsetHeight-2+'px';
				act1.style.top=box.offsetTop+'px';
				act1.style.left=box.offsetLeft+'px';
				act1.className='act';
				document.body.appendChild(act1);
				//当鼠标移动时触发的事件
				document.onmousemove=function(ev){
					var oEvent=ev||event;
					act1.style.left=oEvent.clientX-disx+'px';
					act1.style.top=oEvent.clientY-disy+'px';
					str.push(oEvent.clientX-disx);
					str1.push(oEvent.clientY-disy);
				};
				//当鼠标抬起时
				document.onmouseup=function(ev){
					var oEvent=ev||event;
					document.onmousemove=null;
					document.onmouseup=null;
					box.style.left=oEvent.clientX-disx+'px';
					box.style.top=oEvent.clientY-disy+'px';
					document.body.removeChild(act1);
					var timer=null;
					//btn.onOff=true;
					var num=str.length;
					//点击恢复按钮触发的事件
					btn.onmousedown=function(){
						timer=setInterval(function(){
							box.style.left=str[num]+'px';
							box.style.top=str1[num]+'px';
							num--;
							if(num==0){
								str=[x,];
								str1=[y,];
								clearInterval(timer);
							}
						},30)
					}
				}
				return false;
			};
		</script>
	</body>
</html>
