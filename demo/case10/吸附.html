<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#box{
				width: 500px;
				height: 500px;
				border: 1px solid black;
				background: #CCCCCC;
				position: relative;
			}
			#box1{
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div id="box">
			<div id="box1"></div>
		</div>
		<script>
			var box=document.getElementById('box');
			var box1=document.getElementById('box1');
			box1.onmousedown=function(ev){
				var oEvent=ev||event;
				var disX=oEvent.clientX-this.offsetLeft;
				var disY=oEvent.clientY-this.offsetTop;
				document.onmousemove=function(ev){
					var oEvent=ev||event;
					var x=oEvent.clientX-disX;
					var y=oEvent.clientY-disY;
					if(x>box.offsetWidth-box1.offsetWidth-50){
						x=box.offsetWidth-box1.offsetWidth-2;
					}else if(x<50){
						x=box.offsetLeft-8
					}
					if(y<50){
						y=box.offsetTop-8
					}else if(y>box.offsetHeight-box1.offsetHeight-50){
						y=box.offsetHeight-box1.offsetHeight-2;
					}
					box1.style.left=x+'px';
					box1.style.top=y+'px';
				}
				document.onmouseup=function(){
					document.onmousemove=null;
				}
				return false;
			}
		</script>
	</body>
</html>
